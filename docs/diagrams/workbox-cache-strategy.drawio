<mxfile host="app.diagrams.net" modified="2026-02-26T00:00:00.000Z" type="device">
  <diagram id="workbox" name="Workbox ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥">
    <mxGraphModel dx="1422" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1200" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- ===== Title ===== -->
        <mxCell id="title" value="Workbox ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥ â€” Service Worker ãŒãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã©ã†å‡¦ç†ã™ã‚‹ã‹" style="text;html=1;fontSize=16;fontStyle=1;align=center;verticalAlign=middle;whiteSpace=wrap;" vertex="1" parent="1">
          <mxGeometry x="100" y="10" width="1000" height="30" as="geometry" />
        </mxCell>

        <!-- ===== React App ===== -->
        <mxCell id="app" value="&lt;b&gt;React ã‚¢ãƒ—ãƒª&lt;/b&gt;&lt;br&gt;fetch() ãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=13;fontStyle=0;" vertex="1" parent="1">
          <mxGeometry x="440" y="50" width="280" height="50" as="geometry" />
        </mxCell>

        <!-- ===== Service Worker Banner ===== -->
        <mxCell id="sw-banner" value="&lt;b&gt;Service Worker (Workbox) ãŒã™ã¹ã¦ã® fetch ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ãƒˆ&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#999999;fontSize=12;fontStyle=0;" vertex="1" parent="1">
          <mxGeometry x="150" y="140" width="900" height="40" as="geometry" />
        </mxCell>

        <!-- Arrow: App â†’ SW -->
        <mxCell id="e-app-sw" value="" style="endArrow=classic;html=1;strokeColor=#999999;strokeWidth=2;" edge="1" source="app" target="sw-banner" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- ===== URL Pattern Label ===== -->
        <mxCell id="url-label" value="URL ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒžãƒƒãƒãƒ³ã‚°ï¼ˆworkbox-routingï¼‰" style="text;html=1;fontSize=11;fontStyle=2;align=center;verticalAlign=middle;whiteSpace=wrap;fontColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="350" y="185" width="500" height="20" as="geometry" />
        </mxCell>

        <!-- ===== Strategy Columns ===== -->

        <!-- â”€â”€ Column 1: Precache (Built Assets) â”€â”€ -->
        <mxCell id="pat1" value="&lt;b&gt;*.js, *.css, *.html&lt;/b&gt;&lt;br&gt;&lt;b&gt;*.svg, *.png&lt;/b&gt;&lt;br&gt;(ãƒ“ãƒ«ãƒ‰æˆæžœç‰©)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e6ffed;strokeColor=#82b366;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="30" y="215" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="str1" value="&lt;b&gt;Precache&lt;/b&gt;&lt;br&gt;(ãƒ—ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;fontStyle=0;" vertex="1" parent="1">
          <mxGeometry x="30" y="305" width="190" height="50" as="geometry" />
        </mxCell>
        <mxCell id="desc1" value="SW ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ™‚ã«&lt;br&gt;&lt;b&gt;å…¨ã‚¢ã‚»ãƒƒãƒˆã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ¸ˆã¿&lt;/b&gt;&lt;br&gt;&lt;br&gt;â†’ ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ™‚ã¯&lt;br&gt;ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰å³åº§ã«è¿”å´&lt;br&gt;ï¼ˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸è¦ï¼‰" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f9fff9;strokeColor=#82b366;fontSize=10;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="30" y="385" width="190" height="110" as="geometry" />
        </mxCell>
        <mxCell id="e1a" value="" style="endArrow=classic;html=1;strokeColor=#82b366;" edge="1" source="sw-banner" target="pat1" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e1b" value="" style="endArrow=classic;html=1;strokeColor=#82b366;" edge="1" source="pat1" target="str1" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e1c" value="" style="endArrow=classic;html=1;strokeColor=#82b366;" edge="1" source="str1" target="desc1" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- â”€â”€ Column 2: NetworkOnly (Google API) â”€â”€ -->
        <mxCell id="pat2" value="&lt;b&gt;googleapis.com/*&lt;/b&gt;&lt;br&gt;(Sheets API / Drive API)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fce4ec;strokeColor=#b85450;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="260" y="215" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="str2" value="&lt;b&gt;NetworkOnly&lt;/b&gt;&lt;br&gt;(ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®ã¿)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;fontStyle=0;" vertex="1" parent="1">
          <mxGeometry x="260" y="305" width="190" height="50" as="geometry" />
        </mxCell>
        <mxCell id="desc2" value="&lt;b&gt;å¸¸ã«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‹ã‚‰å–å¾—&lt;/b&gt;&lt;br&gt;&lt;br&gt;ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ãªã„&lt;br&gt;ï¼ˆãƒ‡ãƒ¼ã‚¿ã®é®®åº¦ãŒæœ€é‡è¦ï¼‰&lt;br&gt;&lt;br&gt;ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ™‚ã¯å¤±æ•—" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff5f5;strokeColor=#b85450;fontSize=10;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="260" y="385" width="190" height="110" as="geometry" />
        </mxCell>
        <mxCell id="e2a" value="" style="endArrow=classic;html=1;strokeColor=#b85450;" edge="1" source="sw-banner" target="pat2" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e2b" value="" style="endArrow=classic;html=1;strokeColor=#b85450;" edge="1" source="pat2" target="str2" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e2c" value="" style="endArrow=classic;html=1;strokeColor=#b85450;" edge="1" source="str2" target="desc2" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- â”€â”€ Column 3: StaleWhileRevalidate (Drive Images) â”€â”€ -->
        <mxCell id="pat3" value="&lt;b&gt;googleusercontent.com/*&lt;/b&gt;&lt;br&gt;(Drive ã‚µãƒ ãƒã‚¤ãƒ«ç”»åƒ)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff8e1;strokeColor=#d6b656;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="490" y="215" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="str3" value="&lt;b&gt;StaleWhileRevalidate&lt;/b&gt;&lt;br&gt;(ã‚­ãƒ£ãƒƒã‚·ãƒ¥å„ªå…ˆ+è£ã§æ›´æ–°)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;fontStyle=0;" vertex="1" parent="1">
          <mxGeometry x="490" y="305" width="190" height="50" as="geometry" />
        </mxCell>
        <mxCell id="desc3" value="â‘  ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒã‚ã‚Œã°&lt;br&gt;&lt;b&gt;å³åº§ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’è¿”å´&lt;/b&gt;&lt;br&gt;&lt;br&gt;â‘¡ åŒæ™‚ã«ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§&lt;br&gt;ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‹ã‚‰æœ€æ–°ç‰ˆã‚’å–å¾—&lt;br&gt;â†’ ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æ›´æ–°&lt;br&gt;&lt;br&gt;ä¸Šé™: 200ä»¶ / 7æ—¥é–“" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fffef5;strokeColor=#d6b656;fontSize=10;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="490" y="385" width="190" height="140" as="geometry" />
        </mxCell>
        <mxCell id="e3a" value="" style="endArrow=classic;html=1;strokeColor=#d6b656;" edge="1" source="sw-banner" target="pat3" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e3b" value="" style="endArrow=classic;html=1;strokeColor=#d6b656;" edge="1" source="pat3" target="str3" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e3c" value="" style="endArrow=classic;html=1;strokeColor=#d6b656;" edge="1" source="str3" target="desc3" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- â”€â”€ Column 4: NetworkFirst (Weather API) â”€â”€ -->
        <mxCell id="pat4" value="&lt;b&gt;api.open-meteo.com/*&lt;/b&gt;&lt;br&gt;(å¤©æ°—äºˆå ± API)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8eaf6;strokeColor=#6c8ebf;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="720" y="215" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="str4" value="&lt;b&gt;NetworkFirst&lt;/b&gt;&lt;br&gt;(ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å„ªå…ˆ)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;fontStyle=0;" vertex="1" parent="1">
          <mxGeometry x="720" y="305" width="190" height="50" as="geometry" />
        </mxCell>
        <mxCell id="desc4" value="â‘  ã¾ãšãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‹ã‚‰å–å¾—&lt;br&gt;ï¼ˆã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ: 10ç§’ï¼‰&lt;br&gt;&lt;br&gt;â‘¡ æˆåŠŸ â†’ ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”å´&lt;br&gt;+ ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æ›´æ–°&lt;br&gt;&lt;br&gt;â‘¢ å¤±æ•— â†’ &lt;b&gt;ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰è¿”å´&lt;/b&gt;&lt;br&gt;&lt;br&gt;ä¸Šé™: 30ä»¶ / 6æ™‚é–“" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f8ff;strokeColor=#6c8ebf;fontSize=10;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="720" y="385" width="190" height="140" as="geometry" />
        </mxCell>
        <mxCell id="e4a" value="" style="endArrow=classic;html=1;strokeColor=#6c8ebf;" edge="1" source="sw-banner" target="pat4" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e4b" value="" style="endArrow=classic;html=1;strokeColor=#6c8ebf;" edge="1" source="pat4" target="str4" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e4c" value="" style="endArrow=classic;html=1;strokeColor=#6c8ebf;" edge="1" source="str4" target="desc4" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- â”€â”€ Column 5: NavigateFallback (SPA) â”€â”€ -->
        <mxCell id="pat5" value="&lt;b&gt;ãƒšãƒ¼ã‚¸é·ç§»&lt;/b&gt;&lt;br&gt;(ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒªã‚¯ã‚¨ã‚¹ãƒˆ)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ede7f6;strokeColor=#9673a6;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="950" y="215" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="str5" value="&lt;b&gt;navigateFallback&lt;/b&gt;&lt;br&gt;(SPA ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;fontStyle=0;" vertex="1" parent="1">
          <mxGeometry x="950" y="305" width="190" height="50" as="geometry" />
        </mxCell>
        <mxCell id="desc5" value="ãƒ—ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥æ¸ˆã¿ã®&lt;br&gt;&lt;b&gt;index.html ã‚’è¿”å´&lt;/b&gt;&lt;br&gt;&lt;br&gt;SPA ãªã®ã§ã©ã® URL ã§ã‚‚&lt;br&gt;åŒã˜ index.html â†’ React&lt;br&gt;Router ãŒãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8f5ff;strokeColor=#9673a6;fontSize=10;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="950" y="385" width="190" height="110" as="geometry" />
        </mxCell>
        <mxCell id="e5a" value="" style="endArrow=classic;html=1;strokeColor=#9673a6;" edge="1" source="sw-banner" target="pat5" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e5b" value="" style="endArrow=classic;html=1;strokeColor=#9673a6;" edge="1" source="pat5" target="str5" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="e5c" value="" style="endArrow=classic;html=1;strokeColor=#9673a6;" edge="1" source="str5" target="desc5" parent="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- ===== Bottom: Legend ===== -->
        <mxCell id="legend" value="&lt;b&gt;Workbox ã¨ã¯ï¼Ÿ&lt;/b&gt;&lt;br&gt;Google è£½ã® Service Worker ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€‚æ‰‹æ›¸ãã§ fetch ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚„ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãä»£ã‚ã‚Šã«ã€&lt;br&gt;ã€Œã“ã® URL ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã¯ã€ã“ã®æˆ¦ç•¥ã‚’ä½¿ã†ã€ã¨å®£è¨€çš„ã«è¨­å®šã™ã‚‹ã ã‘ã§ã€ä¸Šè¨˜ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥å‡¦ç†ã‚’è‡ªå‹•åŒ–ã—ã¦ãã‚Œã‚‹ã€‚&lt;br&gt;&lt;br&gt;&lt;b&gt;vite-plugin-pwa&lt;/b&gt; çµŒç”±ã§ä½¿ã†ã“ã¨ã§ã€ãƒ“ãƒ«ãƒ‰æˆæžœç‰©ã®ãƒ—ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒªã‚¹ãƒˆã‚‚è‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹ï¼ˆæ‰‹å‹•æ›´æ–°ä¸è¦ï¼‰ã€‚" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#cccccc;fontSize=11;align=left;spacingLeft=10;spacingRight=10;" vertex="1" parent="1">
          <mxGeometry x="30" y="560" width="1110" height="90" as="geometry" />
        </mxCell>

        <!-- ===== Bottom: Network / Cache indicators ===== -->
        <mxCell id="network-icon" value="ðŸŒ ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="30" y="670" width="140" height="35" as="geometry" />
        </mxCell>
        <mxCell id="cache-icon" value="ðŸ’¾ ã‚­ãƒ£ãƒƒã‚·ãƒ¥" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="190" y="670" width="140" height="35" as="geometry" />
        </mxCell>
        <mxCell id="both-icon" value="ðŸ”„ ä¸¡æ–¹" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=11;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="350" y="670" width="140" height="35" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
